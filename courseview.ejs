<!DOCTYPE html>
<html>
    <head>

        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width-device-width, initial-scale=1.0">
        <title>Main Page</title>
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"/>
        <link rel="stylesheet" href="style.css">

    </head>

    <body>

        <section id="header">
            <a href="/"><img src="logo2.png"></a>

            <div>
                <ul id="navbar">
                  <% if(faculty){ %>
                    <% if(user){ %>
                        <li><a  readonly href="/">Dashboard</a></li>
                        <li><a  class="active" href="course">Course Details</a></li>
                        <li><a href="courseselect">Assesment Marks</a></li>
                    <li><a href="fresult">Publish Result</a></li>
                    <li><a href="/logout">Logout</a></li>
                    <li><a readonly><%= user.FName %></a></li>
                    <% }else{ %>
                    <li><a href="login">Student Sign-In</a></li>
                    <li><a href="flogin">Faculty Sign-In</a></li>
                    <% } %>
                    <% } %>
                  
                </ul>
            </div>
        </section>

        <% if(faculty){ %>
            <% if(user){ %>   
                <div class="container " style="height:610px;">
                    <div class="sidenav">
                      
                     
               
                        <a href="/courseselect">Asessment result</a>
                        <a href="/coursesel">View Details</a>
                       
                
             
            </div>
        
        
        <section id="same"  >
            <h2>Student Information</h2>
            <div class="bod">
              
                
                    <style>
                        table {
                          border-collapse: collapse;
                          width: 100%;
                         
                          
                        }
                        
                        th, td {
                          padding: 8px;
                          text-align: left;
                          border-bottom: 1px solid #ddd;
                        }
                        </style>
                       
                        
                      
                     
                        
                        <table >
                          <tr>
                            <th>Student ID</th>
                            <th>Name</th>
                            
                          
                          <th>Course_ID</th>
                          <th>Course Name</th>
                          <th>Delete/Modify</th>
                         
                          </tr>
                         
                      <% for(var i=0; i<data.length; i++) {%>
                       
                      <tr>
                        <td><%=data[i].Student_ID%></td>
                        <td><%=data[i].FiName%> <%=data[i].LaName%></td>                                                      
                          
                        <td><%=data[i].Course_ID%></td>  
                        <td><%=data[i].Course_Name%></td>  
                        
                           
                                    <td> <button onclick="deleteRow(this,'<%= data[i].Student_ID%>','<%= data[i].CID%>')">Delete</button> </td>   
                                     

                      </tr>
                      <% } %>
                        </table>
                         
                        <script>
                          function deleteRow(button, studentID,courseID) {
                            // Create a new XMLHttpRequest object
                            var xhr = new XMLHttpRequest();
                        
                            // Configure the HTTP request (method, URL, asynchronous flag)
                            xhr.open('DELETE', `/api/deleteStudentc/${studentID}/${courseID}`, true);
                        
                            // Set up a callback function for when the request completes
                            xhr.onload = function () {
                              if (xhr.status >= 200 && xhr.status < 300) {
                                // If the deletion is successful, remove the row from the table
                                var row = button.parentNode.parentNode;
                                row.parentNode.removeChild(row);
                              } else {
                                // Handle the error case if needed
                                console.error('Failed to delete the student record.');
                              }
                            };
                        
                            // Set up a callback function for network errors
                            xhr.onerror = function () {
                              console.error('Error occurred while deleting the student record:', xhr.statusText);
                            };
                        
                            // Send the HTTP request
                            xhr.send();
                          }
                        </script>
               
            </div>
        </section>
    </div>
           
        <% } %>
        <% } %>


        <footer class="section-p1">
            <div class="col">
                <img class="logo" src="img/logo.png" alt="">
                <h4>Contact</h4>
                <p><strong>Address :</strong> SaintGits, Thiruvalla, Kerala</p>
                <p><strong>Phone :</strong> +91 96050 97334</p>
                <p><strong>Hours :</strong>10:00 - 18:00, Mon - Sat</p>
                <div class="follow">
                    <h4>Follow Us</h4>
                    <div class="icon">
                        <i class="fab fa-facebook"></i>
                        <i class="fab fa-twitter"></i>
                        <i class="fab fa-instagram"></i>
                        <i class="fab fa-pinterest"></i>
                        <i class="fab fa-youtube"></i>
                    </div>
                </div>
            </div>

            <div class="col">
                <h4>About</h4>
                <a href="#">About Us</a>
                <a href="#">Privacy Policy</a>
                <a href="#">Terms & Conditions</a>
                <a href="#">Contact Us</a>
                <a href="#">Help</a>
            </div>

            <div class="copyright">
                <p>Â© 2022, SaintGits - Project</p>
            </div>
        </footer>

    </body>

</html>